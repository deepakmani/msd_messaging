{"map":"{\"version\":3,\"sources\":[\"/Users/deepakabs/programming/node_projects/msd_messaging/client/node_modules/url-loader/dist/cjs.js??ref--6-oneOf-0!/Users/deepakabs/programming/node_projects/msd_messaging/client/src/images/green_circle.png\",\"/Users/deepakabs/programming/node_projects/msd_messaging/client/node_modules/file-loader/dist/cjs.js??ref--6-oneOf-7!/Users/deepakabs/programming/node_projects/msd_messaging/client/src/logo.svg\",\"/Users/deepakabs/programming/node_projects/msd_messaging/client/src/components/DirectMessage.js\",\"/Users/deepakabs/programming/node_projects/msd_messaging/client/src/App.js\",\"/Users/deepakabs/programming/node_projects/msd_messaging/client/src/serviceWorker.js\",\"/Users/deepakabs/programming/node_projects/msd_messaging/client/src/index.js\"],\"names\":[\"module\",\"exports\",\"__webpack_require__\",\"p\",\"DirectMessage\",\"_Component\",\"_this\",\"Object\",\"classCallCheck\",\"this\",\"possibleConstructorReturn\",\"getPrototypeOf\",\"call\",\"scrollToBottom\",\"messagesEnd\",\"scrollIntoView\",\"behavior\",\"first_message_dates\",\"state\",\"new_message\",\"direct_messages\",\"messages\",\"sender_username\",\"sentAt\",\"message\",\"senderName\",\"profile_img_url\",\"handleChange\",\"bind\",\"assertThisInitialized\",\"send_direct_message\",\"update_first_message_date\",\"inherits\",\"createClass\",\"key\",\"value\",\"date_str\",\"id\",\"getDirectMessages\",\"props\",\"current_user\",\"username\",\"selected_user\",\"username1\",\"username2\",\"_this2\",\"setState\",\"fetching_direct_messages\",\"fetch\",\"then\",\"response\",\"json\",\"updated_direct_messages\",\"map\",\"dm\",\"date\",\"Date\",\"createdAt\",\"toDateString\",\"sent\",\"catch\",\"err\",\"nextProps\",\"undefined\",\"prevProps\",\"event\",\"_this3\",\"preventDefault\",\"direct_message\",\"trim\",\"timestamp\",\"getTime\",\"receiver_username\",\"read\",\"display_date\",\"date_string\",\"toConsumableArray\",\"concat\",\"method\",\"body\",\"JSON\",\"stringify\",\"headers\",\"Content-Type\",\"data\",\"el\",\"assign\",\"target\",\"_this4\",\"react_default\",\"a\",\"createElement\",\"Fragment\",\"className\",\"name\",\"DirectMessage_Message\",\"style\",\"float\",\"clear\",\"ref\",\"onSubmit\",\"onChange\",\"type\",\"Component\",\"Message\",\"firstMessageDate\",\"status\",\"toLocaleTimeString\",\"navigator\",\"language\",\"hour\",\"minute\",\"color\",\"font-size\",\"updatedAt\",\"text-align\",\"profile_image_url\",\"height\",\"width\",\"src\",\"App\",\"selected_member_to_message\",\"router\",\"users\",\"fetching_members\",\"fetched_members_success\",\"members\",\"selected_member_status\",\"member_statuses\",\"test\",\"active_nav\",\"selectMemberToMessage\",\"selectCurrentUser\",\"fetchUsers\",\"fetchDirectMessageCountForUser\",\"user_msg_counts\",\"currentUser\",\"encodeURIComponent\",\"company\",\"forEach\",\"user\",\"member\",\"isActive\",\"history\",\"push\",\"new_msg_count\",\"memberList\",\"_this5\",\"onClick\",\"green_circle\",\"BrowserRouter\",\"background\",\"border\",\"padding\",\"cellspacing\",\"cellpadding\",\"Route\",\"exact\",\"path\",\"render\",\"DirectMessage_DirectMessage\",\"Boolean\",\"window\",\"location\",\"hostname\",\"match\",\"ReactDOM\",\"src_App_0\",\"document\",\"getElementById\",\"serviceWorker\",\"ready\",\"registration\",\"unregister\",\"withRouter\"],\"mappings\":\"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\",\"sourcesContent\":[\"module.exports = \\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAAlwSFlzAAAphgAAKYYBIuzfjAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAchJREFUKBV9UjFLHEEU/mZ219M7Q0rrWCoRAzaS5oKnSKp0lvYK2p4guF26FIGDSFJa6A8wAS2SEE0RNDZaJIVaSoIGRD3vZmcm35vdOwgceTDzZt9833vfznuAWJrq4Dvbeu0h3k4N4dXkQCdEr5Cii+MHSWnqAqAxPQPv5wl5DI8y/RXgvyKL3mF55zhghJzCqW7GRu0llKqjPwKsz8NyG7FI0zCBWsbC7ka48FBE0Rq1NVSSVVgWbrkMznuS82WcRX88iMy9wPNH3/H+7CdUNVZ4Mz1B0B5iXYJxbcpLQjKpFgor7t6gnJRwZ45gkyqWPlxrkuZCMHOmIAlFkZR7eM1zhPtMok8QtWcksbzSOKXJWYC9TSkd5PfJn+kxAQmx0tEkgd7mc+GKzvsHghHin6JY8ZQ9qSKc8gXiic+J36CDyv8RLTEKLWtJOciJym7iln0qRfKaba6Qtus9ZDgcBmK5+YJRs8NvSl34+IP7SoD3RSXGmLUAi5f3rbAVN+aS8DqefcqQVuN8ALZPDzE7fMEBeMrMFfZUh5UUvmlOoPQ8Fnf3w7ym5/bfWX09NcLqcxy9CeoaZIVf9J/Z9C02/TeVSP2w/wUqsacLZFajbwAAAABJRU5ErkJggg==\\\"\",\"module.exports = __webpack_public_path__ + \\\"static/media/logo.5d5d9eef.svg\\\";\",\"import React, { Component } from 'react';\\nexport class DirectMessage extends Component {\\n\\t constructor() {\\n        super();\\n\\n        // Hash dates to display above first message of day to show date is displayed\\n       this.first_message_dates = {};\\n       \\n\\n       this.state = {\\n       \\t// Message to send\\n       \\tnew_message: \\\"\\\",\\n\\n       \\t// List of Messages\\n      \\tdirect_messages: [],\\n      \\tmessages: [{sender_username: \\t\\t\\\"deepakabs\\\",\\n      \\t\\t\\t\\tsentAt: \\t\\t\\\"Wed Nov 20, 2018 at 11\\\",\\n      \\t\\t\\t\\tmessage: \\t\\t\\\"1\\\"\\n      \\t\\t\\t  }, \\n      \\t\\t\\t  {sender_username: \\t\\t    \\\"deepakabs\\\",\\n      \\t\\t\\t\\tsenderName:\\t\\t\\\"Deepak ABS\\\",\\n      \\t\\t\\t\\tprofile_img_url: \\\"abs\\\",\\n      \\t\\t\\t\\tsentAt: \\t\\t\\\"Wed Nov 20, 2018 at 11\\\",\\n      \\t\\t\\t\\tmessage: \\t\\t\\\"2\\\"\\n      \\t\\t\\t  }\\n      \\t\\t\\t  ,\\n      \\t\\t\\t  {sender_username: \\t\\t\\\"deepakabs\\\",\\n      \\t\\t\\t\\tsenderName:\\t\\t\\\"Deepak ABS\\\",\\n      \\t\\t\\t\\tprofile_img_url: \\\"abs\\\",\\n      \\t\\t\\t\\tsentAt: \\t\\t\\\"Wed Nov 20, 2018 at 11\\\",\\n      \\t\\t\\t\\tmessage: \\t\\t\\\"3\\\"\\n      \\t\\t\\t  }, \\n      \\t\\t\\t  {sender_username: \\t\\t    \\\"deepakabs\\\",\\n      \\t\\t\\t\\tsenderName:\\t\\t\\\"Deepak ABS\\\",\\n      \\t\\t\\t\\tprofile_img_url: \\\"abs\\\",\\n      \\t\\t\\t\\tsentAt: \\t\\t\\\"Wed Nov 20, 2018 at 11\\\",\\n      \\t\\t\\t\\tmessage: \\t\\t\\\"4\\\"\\n      \\t\\t\\t  }]\\n      }\\t\\t  \\n        \\n        // Bind to class         \\n        this.handleChange = this.handleChange.bind(this);\\n    \\tthis.send_direct_message = this.send_direct_message.bind(this);       \\t\\n    \\tthis.update_first_message_date = this.update_first_message_date.bind(this);\\n    }\\n\\n    /* @name:  \\tupdate_first_message_date()\\n\\t\\t@descr: Show first message with date \\n    */\\n  update_first_message_date(date_str, id) {\\n   \\tthis.first_message_dates[date_str] = id;\\n\\n  }\\n    /* @name:  \\tcomponentDidMount()\\n\\t\\t@descr: fetch messages between selected user and current user\\n    */\\n   componentDidMount() {\\n      // Show loading \\n      this.scrollToBottom();\\n\\n    //  this.setState({fetching_direct_messages: true});\\n\\n      // Collect Messages\\n      this.getDirectMessages(this.props.current_user.username, this.props.selected_user.username)\\n      \\n\\n    } \\n\\n    /*\\n    \\t@name:getDirectMessages\\n    \\t@descr: Make GET request to getDirectMessages\\n    */\\n  \\tgetDirectMessages(username1, username2) {\\n\\n\\t\\tthis.first_message_dates = {};\\n   \\n\\t \\tthis.setState({\\n            fetching_direct_messages: true\\n        });\\n\\t  let api = \\\"/api/getDirectMessages?username1=\\\"  + username1 + \\\"&username2=\\\" + username2;\\n\\t  return fetch(api)\\n\\t  .then(response =>  response.json())\\n\\t  .then((direct_messages) => {\\n\\n\\n  \\t\\t// 2. Update firstMessageDay hash\\n  \\t\\tlet  updated_direct_messages = direct_messages.map((dm) => {\\n  \\t\\t\\tlet date = new Date(dm.createdAt);\\t\\n  \\t\\t\\tif (!this.first_message_dates[date.toDateString()])\\n  \\t\\t\\t\\tthis.first_message_dates[date.toDateString()] = dm.id;\\n  \\t\\t\\tdm.sent = true;\\n  \\t\\t\\treturn dm;\\n  \\t\\t});\\n\\n  \\t\\t// 3.Update state\\n        this.setState({\\n            direct_messages:     updated_direct_messages,\\n            fetching_direct_messages: false\\n        })\\n        \\n      })\\n\\t.catch((err) => {\\n\\t        this.setState({\\n\\t         \\t//   direct_messages:     updated_direct_messages,\\n\\t            fetching_direct_messages: false\\n\\t        })\\n\\t    })  \\n\\n  \\t}\\n\\n  \\tcomponentWillReceiveProps(nextProps) {\\n\\n\\t\\tif (nextProps && nextProps.selected_user != undefined &&  nextProps.current_user != undefined) {\\n\\t\\t\\tif ((this.props.current_user.username != nextProps.current_user.username) || \\n\\t\\t\\t\\t (this.props.selected_user.username != nextProps.selected_user.username))\\n\\t\\t\\t{\\n\\t\\t\\t\\t // Collect Messages\\n\\t\\t\\t     this.getDirectMessages(nextProps.current_user.username, nextProps.selected_user.username)\\n\\t\\t\\t     \\n\\t\\t\\t}\\n\\t\\t}\\n\\t  //this.scrollToBottom();\\n\\t}\\n  \\tcomponentDidUpdate(prevProps) {\\n\\t\\t// if (prevProps && prevProps.selected_user != undefined &&  prevProps.current_user != undefined) {\\n\\t\\t// \\tif ((this.props.current_user.username != prevProps.current_user.username) || \\n\\t\\t// \\t\\t (this.props.selected_user.username != prevProps.selected_user.username))\\n\\t\\t// \\t{\\n\\t\\t// \\t\\t // Collect Messages\\n\\t\\t// \\t     this.getDirectMessages(this.props.current_user.username, this.props.selected_user.username)\\n\\t\\t\\t     \\n\\t\\t// \\t}\\n\\t\\t// }\\n\\t  this.scrollToBottom();\\n\\t}\\n\\n\\n    /* @name: send_direct_message \\n       @descr: Send the message to the db and update the status\\n    */ \\n   send_direct_message(event) {\\n   \\t\\tevent.preventDefault();\\n    \\t// 1. Create message object\\n    \\tvar date \\t\\t= new Date();\\n    \\tvar\\tdate_str \\t= date.toDateString();\\n    \\tvar message \\t= this.state.new_message;\\n        message = message.trim();\\n        var direct_message = {};\\n    \\tif (message) {\\n    \\t\\n    \\t \\tvar timestamp \\t= date.getTime();\\n     \\t\\t  \\tdirect_message = {\\n                            message:  message,\\n                            sender_username:   this.props.current_user.username,\\n                            id:       timestamp + \\\"_\\\" + this.props.current_user.username,   \\n                            receiver_username: this.props.selected_user.username,\\n\\n                            // Boolean indicating if message is sent\\n                            sent:   false,\\n                           \\tread: \\tfalse,\\n                            // Display date for the first message in a day\\n                            display_date: !(date_str in this.first_message_dates) ? true : false,\\n                            date_string:  date_str\\n      \\t\\t};\\n\\n      \\t\\t// Update sent_dates_list\\n      \\t\\tif (direct_message.display_date) {\\n      \\t\\t\\tthis.first_message_dates[date_str] = false;\\n      \\t\\t}\\n\\n      \\t\\tthis.setState({\\n\\t    \\t\\tdirect_messages: [...this.state.direct_messages, direct_message]\\n\\t    \\t});\\n\\n      \\t\\tfetch(\\\"/api/sendDirectMessage\\\", {\\n\\t\\t\\t  method: 'POST', // or 'PUT'\\n\\t\\t\\t  body: JSON.stringify({direct_message: direct_message}),\\n\\t\\t\\t  headers: {\\n                \\\"Content-Type\\\": \\\"application/json\\\"\\n            \\t}\\n\\t\\t\\t})\\n\\t\\t\\t.then((response) =>response.json())\\n\\t\\t\\t.then((data) => {\\n\\n\\t\\t\\t\\t// If message is delivered\\n\\t\\t\\t\\tif (data.sent) {\\n\\t\\t\\t\\t\\t// Update message with status\\n\\t\\t\\t\\t\\t this.setState({\\n\\t\\t\\t\\t\\t      direct_messages: this.state.direct_messages.map((el) => (el.id === data.id) ?\\n\\t\\t\\t\\t\\t      \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  Object.assign({}, el, {\\n\\t\\t\\t\\t\\t      \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  \\tsent: true,\\n\\t\\t\\t\\t\\t      \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  \\tcreatedAt: data.createdAt\\n\\t\\t\\t\\t\\t      \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  })\\n\\t\\t\\t\\t\\t      \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  : el)\\n\\t\\t\\t\\t\\t    });\\t\\n\\n\\t\\t\\t\\t}\\n\\t\\t\\t})\\n\\t\\t\\t// Don't modify the messages\\n\\t\\t\\t.catch((err) => {\\n\\n\\t\\t\\t})\\n\\t    \\t\\n\\t    \\t// Save the new message in database\\n      \\t\\t\\n      \\t\\t// Update sent status \\n  \\t\\t}\\n\\n\\n  }\\n\\n   /* @name: handleChange: \\n      @descr: Update text field when user modifies it\\n \\t*/\\n \\thandleChange(event) {\\n \\t event.preventDefault();\\n   \\t this.setState({new_message: event.target.value});\\n  \\t}\\t\\n    // Scroll to bottom\\n    scrollToBottom = () => {\\n\\t  this.messagesEnd.scrollIntoView({ behavior: \\\"smooth\\\" });\\n\\t}\\n\\n\\t\\n\\trender() {\\n\\n\\t\\treturn (\\n\\t\\t\\t<React.Fragment key={this.props.current_user}>\\n\\n\\t\\t\\t<div className=\\\"direct-message-header\\\">\\n\\t\\t\\t\\t\\t<span> Send Message To  {this.props.selected_user.name} </span>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div className=\\\"direct-message-history-wrapper\\\">\\n\\n\\t\\t\\t\\t<div className=\\\"direct-message-history\\\">\\n\\t\\t\\t\\t \\t  {!this.state.fetching_direct_messages &&\\n\\t\\t\\t\\t \\t   <div> \\n\\t\\t\\t\\t \\t   \\t{this.state.direct_messages.map((message) => \\n\\t\\t\\t\\t \\t\\t \\t<Message key={message.id} message = {message} current_user = {this.props.current_user}  selected_user = {this.props.selected_user} update_first_message_date={this.update_first_message_date} first_message_dates={this.first_message_dates} > </Message>\\n\\t\\t\\t\\t \\t\\t)}\\n\\t\\t\\t\\t \\t\\t</div>\\n\\t\\t\\t\\t \\t}\\n\\t\\n\\t\\t\\t \\t\\t <div style={{ float:\\\"left\\\", clear: \\\"both\\\" }}\\n\\t\\t\\t             ref={(el) => { this.messagesEnd = el; }}>\\n\\t\\t\\t       \\t </div>\\n\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t<hr/>\\n\\n\\n\\t\\t\\t\\t <form onSubmit={this.send_direct_message}>\\n\\t\\t\\t        <label>\\n\\n\\t\\t\\t          <textarea className=\\\"send-message-textarea\\\" value={this.state.new_message} onChange={this.handleChange} />\\n\\t\\t\\t        </label>\\n\\t\\t\\t        <input className=\\\"mdl-button mdl-button--primary mdl-button--raised\\\" type=\\\"submit\\\" value=\\\"Send\\\" />\\n\\t\\t\\t      </form>\\n\\t\\t\\t</div>\\n\\t\\t\\t</React.Fragment>\\n\\n\\t\\t)\\n\\t}\\n}\\n\\nclass Message extends Component {\\n\\t\\t\\n\\tconstructor() {\\n\\t\\tsuper();\\n\\t}\\n\\trender() {\\n\\t\\t// Sending / Sent / Seen\\n\\t\\tlet status = \\\"\\\";\\n\\t\\n\\t\\t// If message is first\\n\\t\\tvar firstMessageDate;\\n\\n\\t\\t// If message is sent\\n\\t\\tif (!this.props.message.sent){\\n\\t\\t\\tstatus = <span style={{color: '#423', float:'right', 'font-size':'10px'}}> Sending... </span>\\n\\t\\t}\\n\\t\\t\\n\\t\\t// If message is sent but unread\\n\\t\\telse if(this.props.message.sent && !this.props.message.read) {\\n\\t\\t\\t\\n\\t\\t\\t// Convert Date to hours minutes\\n\\t\\t\\tlet date = new Date(this.props.message.createdAt);\\n\\t\\t\\t\\tdate = date.toLocaleTimeString(navigator.language, {hour: '2-digit', minute:'2-digit'});\\n\\t\\t\\t\\n\\t\\t\\tstatus = <span style={{color: '#12B', float:'right', 'font-size':'10px'}}> Sent at {date} </span>\\n\\t\\t}\\n\\n\\t\\telse if(this.props.message.sent && this.props.message.read) {\\n\\n\\t\\t\\tlet date = new Date(this.props.message.updatedAt);\\n\\t\\t\\t\\tdate = date.toLocaleTimeString();\\n\\t\\t\\tstatus = <span style={{color: '#090', float:'right', 'font-size':'10px'}}> Seen at {date} </span>\\n\\t\\t}\\n\\n\\t\\t// Display Date for First Message of Day\\n\\t\\tlet date_str = this.props.message.date_string ? this.props.message.date_string : new Date(this.props.message.createdAt).toDateString();\\n\\n\\n\\t\\tif (this.props.message.display_date && this.props.first_message_dates[date_str] == false && !this.props.message.sent) {\\n\\t\\t\\tfirstMessageDate =   <div style={{\\\"text-align\\\": 'center', 'font-size':'15px'}}> {date_str} </div>;\\n\\n\\t\\t\\tthis.props.update_first_message_date(date_str, this.props.message.id);\\n\\t\\t}\\n\\t\\tif (this.props.message.sent && this.props.first_message_dates[date_str] ==  this.props.message.id) {\\n\\n\\t\\t\\tfirstMessageDate = <div style={{\\\"text-align\\\": 'center', 'font-size':'15px'}}> {date_str} </div>;\\n\\t\\t}\\n\\n\\t \\tif (this.props.current_user.username == this.props.message.sender_username) {\\n\\n\\t\\treturn (\\n\\t\\t\\t\\t// If message is sent by user style it differently\\n\\t\\t\\t\\t<React.Fragment>\\n\\t\\t\\t\\t{firstMessageDate}\\n\\t\\t\\t\\t<br/>\\n\\t\\t\\t\\t<ul className=\\\"sent-message-ul\\\">\\n\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t{this.props.current_user.profile_image_url}\\n\\t\\t\\t\\t\\t\\t<br/>\\n\\t\\t\\t\\t\\t\\tYou\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t<li> \\n\\t\\t\\t\\t\\t\\t<span className=\\\"sent-message\\\">\\n\\t\\t\\t\\t\\t\\t\\t{this.props.message.message}\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<br/>\\n\\t\\t\\t\\t\\t\\t<br/>\\n\\n\\t\\t\\t\\t\\t\\t{status}\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t</ul>\\t\\t\\n\\t\\t\\t\\t</React.Fragment>\\n\\t\\t\\t\\t\\n\\t \\t\\t)\\n\\t\\t}\\n\\n\\t\\tif (this.props.selected_user.username == this.props.message.sender_username) {\\n\\n\\t\\treturn (\\n\\t\\t\\t\\t// If message is sent by user style it differently\\n\\t\\t\\t\\t<React.Fragment>\\n\\t\\t\\t\\t{firstMessageDate}\\n\\t\\t\\t\\t<br/>\\n\\t\\t\\t\\t<ul className=\\\"received-message-ul\\\">\\n\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t<img style={{height:\\\"30px\\\", width:\\\"30px\\\"}} src={this.props.selected_user.profile_img_url}/>\\n\\t\\t\\t\\t\\t\\t<br/>\\n\\t\\t\\t\\t\\t\\t{this.props.selected_user.name}\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t<li> \\n\\t\\t\\t\\t\\t\\t<span className=\\\"sent-message\\\">\\n\\t\\t\\t\\t\\t\\t\\t{this.props.message.message}\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<br/>\\n\\t\\t\\t\\t\\t\\t<br/>\\n\\t\\t\\t\\t\\t\\t{status}\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</ul>\\t\\t\\n\\t\\t\\t\\t</React.Fragment>\\n\\t\\t\\t\\t\\n\\t \\t\\t)\\n\\t\\t}\\n\\t\\n\\t}\\t\\n}\\n\\n\\n\\n\",\"import React, { Component } from 'react';\\nimport logo from './logo.svg';\\nimport green_circle from './images/green_circle.png';\\nimport './App.css';\\nimport ReactDOM from 'react-dom';\\nimport { DirectMessage } from './components/DirectMessage.js';\\n//import { Link, NavLink, Route } from 'react-router-dom' \\nimport { Switch, Link, NavLink, Route } from 'react-router-dom'\\nimport { BrowserRouter } from 'react-router-dom';\\n\\nimport {withRouter} from 'react-router-dom'\\n\\n\\nclass App extends Component {\\n   constructor (props) {\\n    \\n    super(props)\\n    \\n    // Initialize local variable\\n    this.selected_member_to_message = {username: \\\"deepakabs\\\"};\\n   \\n\\n     /** @type BrowserRouter */\\n    this.router = undefined\\n\\n    // Declare DirectMessageUsers\\n    this.state = {\\n      // Set currentUser\\n      users:                          [],\\n      // Show loading spinner \\n      fetching_members: false,\\n      \\n      // Indicate failure or success of request\\n      fetched_members_success:        true,\\n\\n      // Display Current User at top\\n      current_user:                {username: \\\"DeepakABS\\\"},\\n                                                    \\n      // Display \\n      members: [],\\n      selected_member_status: \\\"All\\\",\\n      member_statuses:        [\\\"All\\\", \\\"Online\\\", \\\"Away\\\", \\\"Offline\\\"],\\n      test:                   1,\\n      \\n      // For setting class\\n      active_nav:     \\\"\\\"\\n    }\\n\\n     // Class binding \\n     this.selectMemberToMessage = this.selectMemberToMessage.bind(this);    \\n     this.selectCurrentUser     = this.selectCurrentUser.bind(this);     \\n\\n  }\\n\\n  // Fetch Users in Company\\n   componentDidMount() {\\n      // Show loading \\n      this.setState({fetching_members: true});\\n\\n      // Set currentUser \\n      this.fetchUsers()\\n      .then((users) => {\\n\\n        this.setState({\\n            test:           3,\\n            users:        users,\\n            current_user: users[0]\\n        })\\n        \\n        return this.fetchDirectMessageCountForUser(this.state.current_user)\\n\\n      })\\n      .then((user_msg_counts) => {\\n        this.setState({\\n            members: user_msg_counts,\\n            fetching_members: false\\n        }, () => {\\n            this.selectMemberToMessage(undefined, this.state.members[0])\\n\\n          });\\n\\n      \\n\\n        // set route\\n\\n      })\\n     .catch((err) => {\\n        this.setState({fetching_members: false, fetched_members_success: false})\\n      });\\n  }   \\n\\n\\n  /*\\n    @name: fetchUsers\\n    @descr: Collect all users \\n  */  \\n  fetchUsers(){\\n    let api     = \\\"/api/getUsers/\\\";\\n\\n    return fetch(api)\\n    .then(response => response.json());\\n  }\\n\\n  /*\\n    @name: fetchDirectMessageCountForUser\\n    @descr: Update state user_msg_counts with users and message counts\\n */\\n  fetchDirectMessageCountForUser(currentUser) {\\n\\n  // Username\\n  const username = encodeURIComponent(currentUser.username);\\n\\n  // Company\\n  const company = encodeURIComponent(currentUser.company);\\n    \\n  let api = \\\"/api/getDirectMessagesCountForUser?username=\\\"  + username + \\\"&company=\\\" + company;\\n\\n\\n  return fetch(api)\\n  .then(response =>  response.json())\\n\\n }\\n\\n selectCurrentUser (event) {\\n  \\n  // Collect user name\\n  let username = event.target.value;\\n  let current_user = {};\\n\\n  // Modify current user\\n  this.state.users.forEach((user) => {\\n                              if (user.username ==  username) \\n                                Object.assign(current_user, user);\\n                          }); \\n\\n\\n  // Show loading \\n  this.setState({fetching_members: true,\\n                 current_user: current_user});\\n\\n  // fetch members for current user\\n  this.fetchDirectMessageCountForUser(current_user) \\n  .then((user_msg_counts) => {\\n        this.setState({\\n            members: user_msg_counts,\\n            fetching_members: false\\n        }, () => {\\n\\n           //  Select member to send message\\n          this.selectMemberToMessage(event, this.state.members[0])\\n        });\\n\\n        ;\\n\\n      })\\n     .catch((err) => {\\n        this.setState({fetching_members: false, fetched_members_success: false})\\n   });\\n }\\n\\n /*\\n  \\n */\\n  selectMemberToMessage(event, member) {\\n    // set member to message\\n    this.selected_member_to_message = member;\\n\\n    // Set border \\n    \\n   // Update message with status\\n   this.setState({\\n      members: this.state.members.map((el) => (el.username === member.username) ?\\n                                      Object.assign({}, el, {\\n                                        isActive: true,\\n                                       })\\n                                      : \\n                                      Object.assign({}, el, {\\n                                        isActive: false,\\n                                       }) )\\n      }, () =>  // Set the route to \\n           this.router.history.push('/directMessage')); \\n \\n           // Mark messages as read by current_user\\n           fetch(\\\"/api/markMessagesAsRead?receiver_username=\\\" + \\n                  this.state.current_user.username + \\\"&sender_username=\\\" + \\n                  this.selected_member_to_message.username) \\n\\n           // Update new_msg_count\\n           .then(() => {\\n             this.setState({\\n                           members: this.state.members.map((el) => (el.username === this.selected_member_to_message.username) ?\\n                                      Object.assign({}, el, {\\n                                        new_msg_count: null,\\n                                       }) :\\n                                      Object.assign({}, el, {\\n                                        new_msg_count: el.new_msg_count,\\n                                       })\\n                                      )\\n                         });\\n            });\\n  }\\n  // Render the Information for each user \\n  render() {\\n\\n    var memberList;\\n    var mainContent;\\n    // Spinner\\n    if(this.state.fetching_members) {\\n        memberList =  <i  style={{'text-align': 'center'}} className=\\\"fa fa-spinner fa-pulse fa-2x fa-fw\\\"></i>; \\n     }\\n    // Error\\n    else if (!this.state.fetched_members_success) {\\n       memberList =  <h4> Unable to get members </h4>;\\n       memberList +=  <button> Retry </button>;\\n     }\\n\\n     else  {\\n        memberList =  \\n                          this.state.members.map((member) => \\n                            <tr key={member.username} className={member.isActive ? 'active-nav' : 'default-nav'} onClick={(event) => this.selectMemberToMessage(event, member)} >\\n                              <td> <img src={member.profile_img_url} style={{height:\\\"30px\\\", width:\\\"30px\\\"}}/> </td>\\n                              <td> {member.name} </td>\\n                              <td style={{\\\"color\\\": \\\"#FF4081\\\"}}> {member.new_msg_count ? (member.new_msg_count) : '' }  </td>\\n                              <td> <img src={green_circle}/> </td>\\n                            </tr>\\n                        )\\n\\n     }\\n\\n\\n\\n    return (\\n      <BrowserRouter ref={ el => this.router = el }>\\n      <div className=\\\"row\\\">\\n        <div className=\\\"mdl-grid\\\">\\n          <div className=\\\"mdl-cell mdl-cell--3-col nav\\\">\\n             \\n              <div className=\\\"direct-messages\\\">\\n                  <h4 style={{'font-size': '18px', 'background':'none', 'border': 'none'}}> Select User </h4>\\n              </div>\\n              <select style={{'background': '#FFF', 'padding': '10px'}} className=\\\"mdl-textfield__input\\\" value={this.state.current_user.username} onChange={this.selectCurrentUser}> \\n                { this.state.users.map((user) => \\n                  <option key={user.username} name={user.username} value={user.username}> {user.name} </option>\\n                )}\\n                </select>\\n              <div className=\\\"direct-messages\\\">\\n                  <h4> Direct Messages </h4>\\n                  <table  cellspacing=\\\"0\\\" cellpadding=\\\"0\\\">\\n                      <tbody>\\n                       \\n                        {memberList}\\n                      </tbody>\\n                    </table>\\n              </div>\\n           </div>\\n\\n            <div className=\\\"mdl-cell mdl-cell--8-col\\\">\\n                <Route exact path='/directMessage/'  render={(props) => <DirectMessage {...props} current_user =  {this.state.current_user} selected_user={this.selected_member_to_message} />} />;\\n            </div>\\n            \\n           \\n       </div>   \\n    </div> \\n     </BrowserRouter> \\n    );\\n  }\\n}\\n\\n\\nexport default App;\\n\",\"// This optional code is used to register a service worker.\\n// register() is not called by default.\\n\\n// This lets the app load faster on subsequent visits in production, and gives\\n// it offline capabilities. However, it also means that developers (and users)\\n// will only see deployed updates on subsequent visits to a page, after all the\\n// existing tabs open on the page have been closed, since previously cached\\n// resources are updated in the background.\\n\\n// To learn more about the benefits of this model and instructions on how to\\n// opt-in, read http://bit.ly/CRA-PWA\\n\\nconst isLocalhost = Boolean(\\n  window.location.hostname === 'localhost' ||\\n    // [::1] is the IPv6 localhost address.\\n    window.location.hostname === '[::1]' ||\\n    // 127.0.0.1/8 is considered localhost for IPv4.\\n    window.location.hostname.match(\\n      /^127(?:\\\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\\n    )\\n);\\n\\nexport function register(config) {\\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\\n    // The URL constructor is available in all browsers that support SW.\\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\\n    if (publicUrl.origin !== window.location.origin) {\\n      // Our service worker won't work if PUBLIC_URL is on a different origin\\n      // from what our page is served on. This might happen if a CDN is used to\\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\\n      return;\\n    }\\n\\n    window.addEventListener('load', () => {\\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\\n\\n      if (isLocalhost) {\\n        // This is running on localhost. Let's check if a service worker still exists or not.\\n        checkValidServiceWorker(swUrl, config);\\n\\n        // Add some additional logging to localhost, pointing developers to the\\n        // service worker/PWA documentation.\\n        navigator.serviceWorker.ready.then(() => {\\n          console.log(\\n            'This web app is being served cache-first by a service ' +\\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\\n          );\\n        });\\n      } else {\\n        // Is not localhost. Just register service worker\\n        registerValidSW(swUrl, config);\\n      }\\n    });\\n  }\\n}\\n\\nfunction registerValidSW(swUrl, config) {\\n  navigator.serviceWorker\\n    .register(swUrl)\\n    .then(registration => {\\n      registration.onupdatefound = () => {\\n        const installingWorker = registration.installing;\\n        if (installingWorker == null) {\\n          return;\\n        }\\n        installingWorker.onstatechange = () => {\\n          if (installingWorker.state === 'installed') {\\n            if (navigator.serviceWorker.controller) {\\n              // At this point, the updated precached content has been fetched,\\n              // but the previous service worker will still serve the older\\n              // content until all client tabs are closed.\\n              console.log(\\n                'New content is available and will be used when all ' +\\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\\n              );\\n\\n              // Execute callback\\n              if (config && config.onUpdate) {\\n                config.onUpdate(registration);\\n              }\\n            } else {\\n              // At this point, everything has been precached.\\n              // It's the perfect time to display a\\n              // \\\"Content is cached for offline use.\\\" message.\\n              console.log('Content is cached for offline use.');\\n\\n              // Execute callback\\n              if (config && config.onSuccess) {\\n                config.onSuccess(registration);\\n              }\\n            }\\n          }\\n        };\\n      };\\n    })\\n    .catch(error => {\\n      console.error('Error during service worker registration:', error);\\n    });\\n}\\n\\nfunction checkValidServiceWorker(swUrl, config) {\\n  // Check if the service worker can be found. If it can't reload the page.\\n  fetch(swUrl)\\n    .then(response => {\\n      // Ensure service worker exists, and that we really are getting a JS file.\\n      const contentType = response.headers.get('content-type');\\n      if (\\n        response.status === 404 ||\\n        (contentType != null && contentType.indexOf('javascript') === -1)\\n      ) {\\n        // No service worker found. Probably a different app. Reload the page.\\n        navigator.serviceWorker.ready.then(registration => {\\n          registration.unregister().then(() => {\\n            window.location.reload();\\n          });\\n        });\\n      } else {\\n        // Service worker found. Proceed as normal.\\n        registerValidSW(swUrl, config);\\n      }\\n    })\\n    .catch(() => {\\n      console.log(\\n        'No internet connection found. App is running in offline mode.'\\n      );\\n    });\\n}\\n\\nexport function unregister() {\\n  if ('serviceWorker' in navigator) {\\n    navigator.serviceWorker.ready.then(registration => {\\n      registration.unregister();\\n    });\\n  }\\n}\\n\",\"import React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport './index.css';\\nimport App from './App';\\nimport * as serviceWorker from './serviceWorker';\\nimport {withRouter} from 'react-router-dom'\\n\\nReactDOM.render( \\n\\t\\t\\t\\t\\t<App /> \\n\\t\\t\\t\\t, \\n\\t\\t\\t\\t\\n\\t\\t\\t\\tdocument.getElementById('root'));\\n\\n// If you want your app to work offline and load faster, you can change\\n// unregister() to register() below. Note this comes with some pitfalls.\\n// Learn more about service workers: http://bit.ly/CRA-PWA\\nserviceWorker.unregister();\\n\\nexport default withRouter(App);\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAAlwSFlzAAAphgAAKYYBIuzfjAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAchJREFUKBV9UjFLHEEU/mZ219M7Q0rrWCoRAzaS5oKnSKp0lvYK2p4guF26FIGDSFJa6A8wAS2SEE0RNDZaJIVaSoIGRD3vZmcm35vdOwgceTDzZt9833vfznuAWJrq4Dvbeu0h3k4N4dXkQCdEr5Cii+MHSWnqAqAxPQPv5wl5DI8y/RXgvyKL3mF55zhghJzCqW7GRu0llKqjPwKsz8NyG7FI0zCBWsbC7ka48FBE0Rq1NVSSVVgWbrkMznuS82WcRX88iMy9wPNH3/H+7CdUNVZ4Mz1B0B5iXYJxbcpLQjKpFgor7t6gnJRwZ45gkyqWPlxrkuZCMHOmIAlFkZR7eM1zhPtMok8QtWcksbzSOKXJWYC9TSkd5PfJn+kxAQmx0tEkgd7mc+GKzvsHghHin6JY8ZQ9qSKc8gXiic+J36CDyv8RLTEKLWtJOciJym7iln0qRfKaba6Qtus9ZDgcBmK5+YJRs8NvSl34+IP7SoD3RSXGmLUAi5f3rbAVN+aS8DqefcqQVuN8ALZPDzE7fMEBeMrMFfZUh5UUvmlOoPQ8Fnf3w7ym5/bfWX09NcLqcxy9CeoaZIVf9J/Z9C02/TeVSP2w/wUqsacLZFajbwAAAABJRU5ErkJggg==\"},19:function(e,t,s){e.exports=s(32)},24:function(e,t,s){},26:function(e,t,s){e.exports=s.p+\"static/media/logo.5d5d9eef.svg\"},27:function(e,t,s){},32:function(e,t,s){\"use strict\";s.r(t);var a=s(0),n=s.n(a),r=s(13),c=s.n(r),i=(s(24),s(6)),m=s(7),l=s(10),u=s(8),o=s(9),g=s(3),d=(s(26),s(15)),h=s.n(d),p=(s(27),s(18)),_=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).scrollToBottom=function(){e.messagesEnd.scrollIntoView({behavior:\"smooth\"})},e.first_message_dates={},e.state={new_message:\"\",direct_messages:[],messages:[{sender_username:\"deepakabs\",sentAt:\"Wed Nov 20, 2018 at 11\",message:\"1\"},{sender_username:\"deepakabs\",senderName:\"Deepak ABS\",profile_img_url:\"abs\",sentAt:\"Wed Nov 20, 2018 at 11\",message:\"2\"},{sender_username:\"deepakabs\",senderName:\"Deepak ABS\",profile_img_url:\"abs\",sentAt:\"Wed Nov 20, 2018 at 11\",message:\"3\"},{sender_username:\"deepakabs\",senderName:\"Deepak ABS\",profile_img_url:\"abs\",sentAt:\"Wed Nov 20, 2018 at 11\",message:\"4\"}]},e.handleChange=e.handleChange.bind(Object(g.a)(Object(g.a)(e))),e.send_direct_message=e.send_direct_message.bind(Object(g.a)(Object(g.a)(e))),e.update_first_message_date=e.update_first_message_date.bind(Object(g.a)(Object(g.a)(e))),e}return Object(o.a)(t,e),Object(m.a)(t,[{key:\"update_first_message_date\",value:function(e,t){this.first_message_dates[e]=t}},{key:\"componentDidMount\",value:function(){this.scrollToBottom(),this.getDirectMessages(this.props.current_user.username,this.props.selected_user.username)}},{key:\"getDirectMessages\",value:function(e,t){var s=this;return this.first_message_dates={},this.setState({fetching_direct_messages:!0}),fetch(\"/api/getDirectMessages?username1=\"+e+\"&username2=\"+t).then(function(e){return e.json()}).then(function(e){var t=e.map(function(e){var t=new Date(e.createdAt);return s.first_message_dates[t.toDateString()]||(s.first_message_dates[t.toDateString()]=e.id),e.sent=!0,e});s.setState({direct_messages:t,fetching_direct_messages:!1})}).catch(function(e){s.setState({fetching_direct_messages:!1})})}},{key:\"componentWillReceiveProps\",value:function(e){e&&void 0!=e.selected_user&&void 0!=e.current_user&&(this.props.current_user.username==e.current_user.username&&this.props.selected_user.username==e.selected_user.username||this.getDirectMessages(e.current_user.username,e.selected_user.username))}},{key:\"componentDidUpdate\",value:function(e){this.scrollToBottom()}},{key:\"send_direct_message\",value:function(e){var t=this;e.preventDefault();var s=new Date,a=s.toDateString(),n=this.state.new_message,r={};if(n=n.trim()){var c=s.getTime();(r={message:n,sender_username:this.props.current_user.username,id:c+\"_\"+this.props.current_user.username,receiver_username:this.props.selected_user.username,sent:!1,read:!1,display_date:!(a in this.first_message_dates),date_string:a}).display_date&&(this.first_message_dates[a]=!1),this.setState({direct_messages:Object(p.a)(this.state.direct_messages).concat([r])}),fetch(\"/api/sendDirectMessage\",{method:\"POST\",body:JSON.stringify({direct_message:r}),headers:{\"Content-Type\":\"application/json\"}}).then(function(e){return e.json()}).then(function(e){e.sent&&t.setState({direct_messages:t.state.direct_messages.map(function(t){return t.id===e.id?Object.assign({},t,{sent:!0,createdAt:e.createdAt}):t})})}).catch(function(e){})}}},{key:\"handleChange\",value:function(e){e.preventDefault(),this.setState({new_message:e.target.value})}},{key:\"render\",value:function(){var e=this;return n.a.createElement(n.a.Fragment,{key:this.props.current_user},n.a.createElement(\"div\",{className:\"direct-message-header\"},n.a.createElement(\"span\",null,\" Send Message To  \",this.props.selected_user.name,\" \")),n.a.createElement(\"div\",{className:\"direct-message-history-wrapper\"},n.a.createElement(\"div\",{className:\"direct-message-history\"},!this.state.fetching_direct_messages&&n.a.createElement(\"div\",null,this.state.direct_messages.map(function(t){return n.a.createElement(f,{key:t.id,message:t,current_user:e.props.current_user,selected_user:e.props.selected_user,update_first_message_date:e.update_first_message_date,first_message_dates:e.first_message_dates},\" \")})),n.a.createElement(\"div\",{style:{float:\"left\",clear:\"both\"},ref:function(t){e.messagesEnd=t}})),n.a.createElement(\"hr\",null),n.a.createElement(\"form\",{onSubmit:this.send_direct_message},n.a.createElement(\"label\",null,n.a.createElement(\"textarea\",{className:\"send-message-textarea\",value:this.state.new_message,onChange:this.handleChange})),n.a.createElement(\"input\",{className:\"mdl-button mdl-button--primary mdl-button--raised\",type:\"submit\",value:\"Send\"}))))}}]),t}(a.Component),f=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this))}return Object(o.a)(t,e),Object(m.a)(t,[{key:\"render\",value:function(){var e,t=\"\";if(this.props.message.sent){if(this.props.message.sent&&!this.props.message.read){var s=new Date(this.props.message.createdAt);s=s.toLocaleTimeString(navigator.language,{hour:\"2-digit\",minute:\"2-digit\"}),t=n.a.createElement(\"span\",{style:{color:\"#12B\",float:\"right\",\"font-size\":\"10px\"}},\" Sent at \",s,\" \")}else if(this.props.message.sent&&this.props.message.read){var a=new Date(this.props.message.updatedAt);a=a.toLocaleTimeString(),t=n.a.createElement(\"span\",{style:{color:\"#090\",float:\"right\",\"font-size\":\"10px\"}},\" Seen at \",a,\" \")}}else t=n.a.createElement(\"span\",{style:{color:\"#423\",float:\"right\",\"font-size\":\"10px\"}},\" Sending... \");var r=this.props.message.date_string?this.props.message.date_string:new Date(this.props.message.createdAt).toDateString();return this.props.message.display_date&&0==this.props.first_message_dates[r]&&!this.props.message.sent&&(e=n.a.createElement(\"div\",{style:{\"text-align\":\"center\",\"font-size\":\"15px\"}},\" \",r,\" \"),this.props.update_first_message_date(r,this.props.message.id)),this.props.message.sent&&this.props.first_message_dates[r]==this.props.message.id&&(e=n.a.createElement(\"div\",{style:{\"text-align\":\"center\",\"font-size\":\"15px\"}},\" \",r,\" \")),this.props.current_user.username==this.props.message.sender_username?n.a.createElement(n.a.Fragment,null,e,n.a.createElement(\"br\",null),n.a.createElement(\"ul\",{className:\"sent-message-ul\"},n.a.createElement(\"li\",null,this.props.current_user.profile_image_url,n.a.createElement(\"br\",null),\"You\"),n.a.createElement(\"li\",null,n.a.createElement(\"span\",{className:\"sent-message\"},this.props.message.message),n.a.createElement(\"br\",null),n.a.createElement(\"br\",null),t))):this.props.selected_user.username==this.props.message.sender_username?n.a.createElement(n.a.Fragment,null,e,n.a.createElement(\"br\",null),n.a.createElement(\"ul\",{className:\"received-message-ul\"},n.a.createElement(\"li\",null,n.a.createElement(\"img\",{style:{height:\"30px\",width:\"30px\"},src:this.props.selected_user.profile_img_url}),n.a.createElement(\"br\",null),this.props.selected_user.name),n.a.createElement(\"li\",null,n.a.createElement(\"span\",{className:\"sent-message\"},this.props.message.message),n.a.createElement(\"br\",null),n.a.createElement(\"br\",null),t))):void 0}}]),t}(a.Component),b=s(33),v=s(34),A=function(e){function t(e){var s;return Object(i.a)(this,t),(s=Object(l.a)(this,Object(u.a)(t).call(this,e))).selected_member_to_message={username:\"deepakabs\"},s.router=void 0,s.state={users:[],fetching_members:!1,fetched_members_success:!0,current_user:{username:\"DeepakABS\"},members:[],selected_member_status:\"All\",member_statuses:[\"All\",\"Online\",\"Away\",\"Offline\"],test:1,active_nav:\"\"},s.selectMemberToMessage=s.selectMemberToMessage.bind(Object(g.a)(Object(g.a)(s))),s.selectCurrentUser=s.selectCurrentUser.bind(Object(g.a)(Object(g.a)(s))),s}return Object(o.a)(t,e),Object(m.a)(t,[{key:\"componentDidMount\",value:function(){var e=this;this.setState({fetching_members:!0}),this.fetchUsers().then(function(t){return e.setState({test:3,users:t,current_user:t[0]}),e.fetchDirectMessageCountForUser(e.state.current_user)}).then(function(t){e.setState({members:t,fetching_members:!1},function(){e.selectMemberToMessage(void 0,e.state.members[0])})}).catch(function(t){e.setState({fetching_members:!1,fetched_members_success:!1})})}},{key:\"fetchUsers\",value:function(){return fetch(\"/api/getUsers/\").then(function(e){return e.json()})}},{key:\"fetchDirectMessageCountForUser\",value:function(e){var t=encodeURIComponent(e.username),s=encodeURIComponent(e.company);return fetch(\"/api/getDirectMessagesCountForUser?username=\"+t+\"&company=\"+s).then(function(e){return e.json()})}},{key:\"selectCurrentUser\",value:function(e){var t=this,s=e.target.value,a={};this.state.users.forEach(function(e){e.username==s&&Object.assign(a,e)}),this.setState({fetching_members:!0,current_user:a}),this.fetchDirectMessageCountForUser(a).then(function(s){t.setState({members:s,fetching_members:!1},function(){t.selectMemberToMessage(e,t.state.members[0])})}).catch(function(e){t.setState({fetching_members:!1,fetched_members_success:!1})})}},{key:\"selectMemberToMessage\",value:function(e,t){var s=this;this.selected_member_to_message=t,this.setState({members:this.state.members.map(function(e){return e.username===t.username?Object.assign({},e,{isActive:!0}):Object.assign({},e,{isActive:!1})})},function(){return s.router.history.push(\"/directMessage\")}),fetch(\"/api/markMessagesAsRead?receiver_username=\"+this.state.current_user.username+\"&sender_username=\"+this.selected_member_to_message.username).then(function(){s.setState({members:s.state.members.map(function(e){return e.username===s.selected_member_to_message.username?Object.assign({},e,{new_msg_count:null}):Object.assign({},e,{new_msg_count:e.new_msg_count})})})})}},{key:\"render\",value:function(){var e,t=this;return this.state.fetching_members?e=n.a.createElement(\"i\",{style:{\"text-align\":\"center\"},className:\"fa fa-spinner fa-pulse fa-2x fa-fw\"}):this.state.fetched_members_success?e=this.state.members.map(function(e){return n.a.createElement(\"tr\",{key:e.username,className:e.isActive?\"active-nav\":\"default-nav\",onClick:function(s){return t.selectMemberToMessage(s,e)}},n.a.createElement(\"td\",null,\" \",n.a.createElement(\"img\",{src:e.profile_img_url,style:{height:\"30px\",width:\"30px\"}}),\" \"),n.a.createElement(\"td\",null,\" \",e.name,\" \"),n.a.createElement(\"td\",{style:{color:\"#FF4081\"}},\" \",e.new_msg_count?e.new_msg_count:\"\",\"  \"),n.a.createElement(\"td\",null,\" \",n.a.createElement(\"img\",{src:h.a}),\" \"))}):(e=n.a.createElement(\"h4\",null,\" Unable to get members \"),e+=n.a.createElement(\"button\",null,\" Retry \")),n.a.createElement(v.a,{ref:function(e){return t.router=e}},n.a.createElement(\"div\",{className:\"row\"},n.a.createElement(\"div\",{className:\"mdl-grid\"},n.a.createElement(\"div\",{className:\"mdl-cell mdl-cell--3-col nav\"},n.a.createElement(\"div\",{className:\"direct-messages\"},n.a.createElement(\"h4\",{style:{\"font-size\":\"18px\",background:\"none\",border:\"none\"}},\" Select User \")),n.a.createElement(\"select\",{style:{background:\"#FFF\",padding:\"10px\"},className:\"mdl-textfield__input\",value:this.state.current_user.username,onChange:this.selectCurrentUser},this.state.users.map(function(e){return n.a.createElement(\"option\",{key:e.username,name:e.username,value:e.username},\" \",e.name,\" \")})),n.a.createElement(\"div\",{className:\"direct-messages\"},n.a.createElement(\"h4\",null,\" Direct Messages \"),n.a.createElement(\"table\",{cellspacing:\"0\",cellpadding:\"0\"},n.a.createElement(\"tbody\",null,e)))),n.a.createElement(\"div\",{className:\"mdl-cell mdl-cell--8-col\"},n.a.createElement(b.a,{exact:!0,path:\"/directMessage/\",render:function(e){return n.a.createElement(_,Object.assign({},e,{current_user:t.state.current_user,selected_user:t.selected_member_to_message}))}}),\";\"))))}}]),t}(a.Component);Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var E=s(35);c.a.render(n.a.createElement(A,null),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()});t.default=Object(E.a)(A)}},[[19,2,1]]]);","extractedComments":[]}